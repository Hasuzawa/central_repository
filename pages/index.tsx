import type { NextPage } from 'next'
import { useState, useEffect } from "react";

import Head from 'next/head';
import Image from 'next/image';
import Link from "next/link";

//import "~/styles/globals.css";  "don't import global css in individual pages"
import Layout from "~/components/Layout";
import { Tag, StringToTags } from "~/components/Tag";
import { Logo, StringToLogos} from "~/components/Logo";
import Status from "~/components/Project/Status";

//in next js each page is separate, so I need to put global variables in localStorage to be accessible to every page
const Home: NextPage = () => {
  const [inDarkMode, setDarkMode] = useState<boolean>( (): boolean => {
    let saved: string | null = "";
    try {
      let saved = localStorage.getItem("inDarkMode");
    } catch (ReferenceError){
      console.log("local storage is not available, dark mode setting will not be saved");
    }
    return saved === "1" ? true : false; // "1" => true, "0" or null => false
  });

  useEffect( () => {
    try {
      localStorage.setItem("inDarkMode", inDarkMode ? "1" : "0");
    } catch (ReferenceError){
      ;
    }
  }, [inDarkMode]);


  return (
    <div className={"h-screen w-screen flex flex-col bg-gray-500" + (inDarkMode ? " dark" : "")}>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div id="header" className="flex-none h-16 w-screen">
        <span>logo</span>
        <span>day/night button</span>
        <button onClick={ () => setDarkMode(!inDarkMode)}>toggle dark mode</button>
        <p className="dark:text-green-500">current dark mode value is {inDarkMode.toString()}</p>
        <p className="text-red-500">dark mode setting in local storage is: </p>
      </div>
      <main id="main" className="flex-auto flex-row">
        {/* only appear at wide screen */}
        <div id="main-left" className="flex-1"></div>

        <div id="projects" className="container mx-auto w-1/4 bg-yellow-200 h-full flex flex-col items-center">
          <div id="project0" className="flex-none h-3/10 w-9/10 bg-red-500">
            <h1>Project 0: Website with React</h1>
            <Status str="completed" />
            <p>my first homepage built with React, Sass and HTML.</p>
            <StringToTags stringArray={["React", "Sass", "HTML"]} />
          </div>
          {/* <h1 className="text-red-500">testing</h1>
          <div id="project0" className="bg-green-200">
            <h2>Project 0</h2>
            <Link href={"/projects/project0"}><a>to project 0</a></Link>
            <button>expand button</button>
            <p>(short description)</p>
            <Logo str="C++" />
            <Logo str="C" />
            <StringToLogos stringArray={["C", "C++", "Javascript", "Django"]} />
          </div> */}
        </div>

        {/* only appear at wide screen */}
        <div id="main-right" className="flex-1 "></div>
      </main>
      <div id="footer" className="flex-none h-16 w-screen">
        <span>this is footer</span>
      </div>
    </div>
  )
}

export default Home
